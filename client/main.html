<head>
  <title>doichain-bounty</title>
</head>

<body>
In order to block a Doichain bounty, you must be logged in please {{> loginButtons}}!
  <h1>Welcome to Doichain bounties!</h1>
  {{> reactiveTable collection=bounties fields=fields rowsPerPage=50}}

{{#if isInRole 'admin'}}<input type="button" value="SyncWithGithUb" class="gitHubSync">{{/if}}
</body>

<template name="bountyEur">
    {{#if isInRole 'admin'}}
        <input type="text" value="{{bountyEur}}" class="bountyEur">
    {{else}}
        {{bountyEur}}
    {{/if}}
</template>

<template name="bountyDoi">
{{#if isInRole 'admin'}}
    <input type="text" value="{{bountyDoi}}" class="bountyDoi">
{{else}}
    {{bountyDoi}}
{{/if}}
</template>

<template name="priority">
{{#if isInRole 'admin'}}
    <select class="priority">
        {{#each priorityEements}}
            <option {{prioritySelected this ../priority}}>{{this}}</option>
        {{/each}}
    </select>
{{else}}
    {{priority}}
{{/if}}
</template>

<template name="blockBounty">
    {{#if currentUser }}

        {{#unless isInRole 'admin'}}
            {{#if blockedBy}}
                state: {{blockedBy.state}} <br>
                by: {{blockedBy.by}} <br>
                until:  {{blockedBy.blockedUntil}}
                {{#if isState 'cancelled'}}
                    <input type="button" value="Block" class="blockBounty">
                {{/if}}
                {{#if isState 'blocked'}}
                    {{#if isMine}}
                        <input type="button" value="Cancel" class="cancelBounty">
                        <input type="button" value="Request Approval" class="requestApproval">
                    {{/if}}
                {{/if}}
            {{else}}
                <input type="button" value="Block" class="blockBounty">
            {{/if}}
        {{/unless}}

        {{#if isInRole 'admin'}}
            {{#if blockedBy}}
                state: {{blockedBy.state}} <br>
                by: {{blockedBy.by}} <br>
                until:  {{blockedBy.blockedUntil}}
                {{#if isState 'cancelled'}}
                    <input type="button" value="Block" class="blockBounty">
                {{/if}}
                {{#if isState 'blocked'}}
                    <input type="button" value="Cancel" class="cancelBounty">
                {{/if}}
                {{#if isState 'under review'}}
                    <input type="button" value="Approve" class="approveBounty">
                    <input type="button" value="Cancel" class="cancelBounty">
                {{/if}}
            {{else}}
                <input type="button" value="Block" class="blockBounty">
            {{/if}}
        {{/if}}
    {{/if}}
</template>

